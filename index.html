<!DOCTYPE html>
<html>
    <head>

        <!-- flexbox footer formatting : solution from https://medium.com/@paynoattn/flexbox-sticky-footer-d19dab50c34 -->
        <style>
            body {
                display: flex;
                flex-direction: column;
                min-height: 100vh;
                color:rgb(42, 197, 15)
            }
        
            footer {
                margin: auto auto 0 auto;
            }
        </style>

        <title>
            Star Trek Game - Making Games By Year Episode 1
        </title>
    </head>
<body style="background-color:black;">

<script src="trekgame.js"></script>

<h2>Star Trek Game - Making Games By Year Episode 1</h2>

<div id="mapstatus">
<div id="map" style="display:inline-block">
<pre>
---------------------------------
                      *           
                          *       
     +K+                          
                                  
     <*>      *                   
                              *   
          *                       
  *                               
---------------------------------

</pre>
</div>

<div id="status" style="display:inline-block; vertical-align: top">
<pre>
    
STARDATE           2416 
CONDITION          *RED*
QUADRANT           4 , 1 
SECTOR             5 , 2 
PHOTON TORPEDOES   10 
TOTAL ENERGY       2802 
SHIELDS            0 
KLINGONS REMAINING 15
</pre>
</div>
</div>

<div id="lrs">
<pre>
</pre>
</div>

<pre>
<div id="gameOutput">
</div>
</pre>

<div id="inputline">
<pre>
<div id="inputPrompt">
ENTER ONE OF THE FOLLOWING:
NAV  (TO SET COURSE)
LRS  (FOR LONG RANGE SENSOR SCAN)
PHA  (TO FIRE PHASERS)
TOR  (TO FIRE PHOTON TORPEDOES)
SHE  (TO RAISE OR LOWER SHIELDS)
DAM  (FOR DAMAGE CONTROL REPORTS)
COM  (TO CALL ON LIBRARY-COMPUTER)
XXX  (TO RESIGN YOUR COMMAND)

Your orders :
</div>
<input maxlength="3" type="text" id="gameInput" name="gameinput" style="font-family: monospace;background-color: black; color:#39FF14; border-color: #39FF14""/>
</pre>
<input type="button" 
    value="Make it so!" 
    onclick="handleInput(this)"
    id="inputButton"
    style="font-family: 
    monospace;background-color: black; color:#39FF14; border-color: #39FF14"">
</input>
</div>

</p>
<footer>
    Game inspired by the BASIC game <a href="https://en.wikipedia.org/wiki/Star_Trek_(1971_video_game)" >"Star Trek"</a>, originally by Mike Mayfield, 1971<br>
    Created for the <a href="https://www.youtube.com/channel/UCw4fSSvUTfZnXYmcW7tUZKg">Youtube Show</a>, "Making Games By Year", Episode 1<br>
    GitHub for the games created for the show can be found <a href="https://github.com/MakingGamesByYear/Games <br>">here.</a><br>
    <a href="https://open.spotify.com/user/chrispugh666/playlist/0SHaymILggGaExem7zKai5?si=4nELQYb9SK6l2JHO3_ndHw">Spotify Playlist</a> for the episode. <br>
</footer>
</body>
<script>

    function handleInput(submitButton)
    {
        submitButton.blur();
        game.gameInput(inputBox.value);
        inputBox.value = "";
    }

    //localStorage.clear();
    //console.log(localStorage.getItem("autosave"));
    lookup = JSON.parse(localStorage.getItem("autosave"));

    if (!lookup)
    {
        game = new TrekGame();
        console.log("Autosave not found, starting new game.");
    }
    else
    {
        gamedata = lookup;
        
        game = TrekGame.ConstructFromJSData(gamedata);

        gameOutputAppend("Welcome back, captain!");
    }

    //localStorage.clear();

    let inputBox =  document.getElementById("gameInput");

    // set up a listener on the input box to map the enter key to being the same as clicking the submit button
    inputBox.addEventListener("keyup", 
        function(event)
        {
            if (event.keyCode == 13) // enter
            {
                event.preventDefault();
                document.getElementById("inputButton").click();
            }
        }
    );
</script>
</html>

